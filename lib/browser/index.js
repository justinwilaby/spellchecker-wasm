!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["spellchecker-wasm"]=t():e["spellchecker-wasm"]=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t){this.cache={},this.data=e,this.ptr=t}get count(){return this.cache.count||(this.cache.count=o(this.data,this.ptr))}get distance(){return this.cache.distance||(this.cache.distance=o(this.data,this.ptr+4))}get term(){if(this.cache.term)return this.cache.term;const e=this.ptr+12,t=e+o(this.data,this.ptr+8);return this.cache.term=r.decodeString(this.data.slice(e,t))}toJSON(){const{count:e,distance:t,term:n}=this;return{count:e,distance:t,term:n}}}function o(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}t.SuggestedItem=r,t.readU32=o,t.deserializeSuggestedItems=function(e,t,n){const i=new Uint8Array(e.slice(t,t+n));t=0;const s=o(i,0);t+=4;const c=[];for(let e=0;e<s;e++){const n=o(i,t);t+=4,c[e]=new r(i,t),t+=n}return c}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(2)),r(n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),o=n(0);class i extends r.SpellcheckerBase{constructor(e){super(e);const t=new TextDecoder;o.SuggestedItem.decodeString=e=>t.decode(e)}encodeString(e){return i.encoder.encode(e)}async prepareSpellchecker(e,t,n=null,o=r.defaultOptions){if(!(e instanceof Response))throw new TypeError("The wasmFetchResponse argument must be a Response object");if(!(t instanceof Response))throw new TypeError("The dictionaryFetchResponse argument must be a Response object");const i=await WebAssembly.instantiateStreaming(e,{env:{memoryBase:0,tableBase:0,memory:new WebAssembly.Memory({initial:1}),table:new WebAssembly.Table({initial:1,element:"anyfunc"}),result_handler:this.resultTrap}});if(!i)throw new Error("Failed to instantiate the parser.");const{symspell:s,write_to_dictionary:c,lookup:a,lookup_compound:u,memory:l}=i.instance.exports;this.wasmSymSpell={symspell:s,write_to_dictionary:c,lookup:a,lookup_compound:u,memory:l},s(o.dictionaryEditDistance,o.countThreshold);const f=new Uint8Array([10]),d=async(e,t)=>{for(;;){const n=await e.read();if(n.done)return this.writeToBuffer(f,l),void c(0,1,!1);let r=0;const o=1048576;for(;r<n.value.length;){const e=n.value.slice(r,r+o);r+=o,this.writeToBuffer(e,l),c(0,e.byteLength,t)}}};if(await d(t.body.getReader(),!1),n){if(!(n instanceof Response))throw new TypeError("The bigramFetchResponse argument must be a Response object");await d(n.body.getReader(),!1)}}}t.SpellcheckerWasm=i,i.encoder=new TextEncoder},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);var o;!function(e){e[e.Top=0]="Top",e[e.Closest=1]="Closest",e[e.All=2]="All"}(o=t.Verbosity||(t.Verbosity={})),t.defaultOptions={dictionaryEditDistance:2,countThreshold:1},t.defaultCheckSpellingOptions={includeUnknown:!1,includeSelf:!1,maxEditDistance:2,verbosity:o.Closest};t.SpellcheckerBase=class{constructor(e){this.resultTrap=(e,t)=>{const{memory:n}=this.wasmSymSpell;this.resultHandler(r.deserializeSuggestedItems(n.buffer,e,t))},this.resultHandler=e}writeToDictionary(e,t=!1){this.writeToBuffer(e,this.wasmSymSpell.memory),this.wasmSymSpell.write_to_dictionary(0,e.byteLength,t)}checkSpelling(e,n=t.defaultCheckSpellingOptions){const{lookup:r,memory:o}=this.wasmSymSpell;let i;i=e instanceof Uint8Array?e:this.encodeString(e),this.writeToBuffer(i,o),r(0,i.byteLength,n.verbosity,n.maxEditDistance,n.includeUnknown,n.includeSelf)}checkSpellingCompound(e,n=t.defaultCheckSpellingOptions){const{lookup_compound:r,memory:o}=this.wasmSymSpell;let i;i=e instanceof Uint8Array?e:this.encodeString(e),this.writeToBuffer(i,o),r(0,i.byteLength,n.maxEditDistance)}writeToBuffer(e,t){if(!this.writeBuffer||this.writeBuffer.buffer!==t.buffer||this.writeBuffer.byteLength<e.byteLength){if(t.buffer.byteLength<e.byteLength){const n=Math.ceil((e.byteLength-t.buffer.byteLength)/65536);t.grow(n)}this.writeBuffer=new Uint8Array(t.buffer,0,e.byteLength)}this.writeBuffer.set(e,0)}}}])}));